(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{101:function(t,e,c){},104:function(t,e,c){},123:function(t,e,c){},124:function(t,e,c){},125:function(t,e,c){},126:function(t,e,c){},127:function(t,e,c){},129:function(t,e,c){},132:function(t,e,c){"use strict";c.r(e);var n=c(0),a=c.n(n),r=c(12),s=c.n(r),o=c(25),u=c(9),i=c(79),l=(c(97),c(16)),b=(c(98),c(99),c(2));var j=function(t){var e=t.children;return Object(b.jsx)("div",{className:"Container",children:e})};var d=function(){return Object(b.jsx)("h1",{className:"home",children:"Welcome to Phonebook"})},O=c(52),f=function(t){return t.contacts.items},m={getToken:function(t){return t.auth.token},isAuthenticated:function(t){return t.auth.isAuthenticated},getUserName:function(t){return t.auth.user.name},getUserEmail:function(t){return t.auth.user.email},getContactsItems:f,getContactsError:function(t){return t.contacts.error},getContactsLoading:function(t){return t.contacts.loading},getContactList:Object(O.a)([f,function(t){return t.contacts.filter}],(function(t,e){var c=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(c)}))}))};c(101);var p=function(){var t=Object(u.c)(m.isAuthenticated);return Object(b.jsxs)("nav",{className:"mainNav",children:[Object(b.jsx)(o.b,{to:"/",exact:!0,className:"link",activeClassName:"activeLink",children:"Main"}),t&&Object(b.jsx)(o.b,{to:"/contacts",className:"link",activeClassName:"activeLink",children:"Contacts"})]})};c(104);var h=function(){return Object(b.jsxs)("div",{className:"authNav",children:[Object(b.jsx)(o.b,{to:"/register",className:"link",activeClassName:"activeLink",children:"Register"}),Object(b.jsx)(o.b,{to:"/login",className:"link",activeClassName:"activeLink",children:"Log In"})]})},g=c.p+"static/media/avatar.3356a4e2.png",C=c(24),x=c.n(C),v=c(8),y={registerRequest:Object(v.b)("auth/registerRequest"),registerSuccess:Object(v.b)("auth/registerSuccess"),registerError:Object(v.b)("auth/registerError"),loginRequest:Object(v.b)("auth/loginRequest"),loginSuccess:Object(v.b)("auth/loginSuccess"),loginError:Object(v.b)("auth/loginError"),logoutRequest:Object(v.b)("auth/logoutRequest"),logoutSuccess:Object(v.b)("auth/logoutSuccess"),logoutError:Object(v.b)("auth/logoutError"),getCurrentUserRequest:Object(v.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(v.b)("auth/getCurrentUserRequest"),getCurrentUserError:Object(v.b)("auth/getCurrentUserError"),fetchContactsRequest:Object(v.b)("contacts/fetchContactsRequest"),fetchContactsSuccess:Object(v.b)("contacts/fetchContactsSuccess"),fetchContactsError:Object(v.b)("contacts/fetchContactsError"),addContactsRequest:Object(v.b)("contacts/addContactsRequest"),addContactsSuccess:Object(v.b)("contacts/addContactsSuccess"),addContactsError:Object(v.b)("contacts/addContactsError"),deleteContactRequest:Object(v.b)("contacts/deleteContactRequest"),deleteContactSuccess:Object(v.b)("contacts/deleteContactSuccess"),deleteContactError:Object(v.b)("contacts/deleteContactError"),updateContactRequest:Object(v.b)("contacts/updateContactRequest"),updateContactSuccess:Object(v.b)("contacts/updateContactSuccess"),updateContactError:Object(v.b)("contacts/updateContactError"),filterContact:Object(v.b)("contacts/changeFilter")};x.a.defaults.baseURL="https://connections-api.herokuapp.com/";var S=function(t){x.a.defaults.headers.common.Authorization="Bearer ".concat(t)},N=function(){x.a.defaults.headers.common.Authorization=""},E={register:function(t){return function(e){e(y.registerRequest()),x.a.post("/users/signup",t).then((function(t){S(t.data.token),e(y.registerSuccess(t.data))})).catch((function(t){return e(y.registerError(t.message))}))}},logIn:function(t){return function(e){e(y.loginRequest()),x.a.post("/users/login",t).then((function(t){S(t.data.token),e(y.loginSuccess(t.data))})).catch((function(t){return e(y.loginError(t.message))}))}},logOut:function(){return function(t){t(y.logoutRequest()),x.a.post("/users/logout").then((function(e){N(),t(y.logoutSuccess(e.data))})).catch((function(e){return t(y.logoutError(e.message))}))}},getCurrentUser:function(){return function(t,e){var c=e().auth.token;c&&(S(c),t(y.getCurrentUserRequest()),x.a.get("/users/current").then((function(e){t(y.getCurrentUserSuccess(e.data))})).catch((function(e){return t(y.getCurrentUserError(e.message))})))}},fetchContacts:function(){return function(t){t(y.fetchContactsRequest()),x.a.get("/contacts").then((function(e){var c=e.data;return t(y.fetchContactsSuccess(c))})).catch((function(e){return t(y.fetchContactsError(e.message))}))}},addContact:function(t){return function(e){e(y.addContactsRequest()),x.a.post("/contacts",t).then((function(t){var c=t.data;return e(y.addContactsSuccess(c))})).catch((function(t){return e(y.addContactsError(t.message))}))}},deleteContact:function(t){return function(e){e(y.deleteContactRequest()),x.a.delete("/contacts/".concat(t)).then((function(){return e(y.deleteContactSuccess(t))})).catch((function(t){return e(y.deleteContactError(t.message))}))}},updateContact:function(t){return function(e){e(y.updateContactRequest()),x.a.patch("/contacts/".concat(t)).then((function(){return e(y.updateContactSuccess(t))})).catch((function(t){return e(y.updateContactError(t.message))}))}}},k=(c(123),c(170)),R=c(167),w=Object(R.a)({button:{display:"block",letterSpacing:"1px",textTransform:"none",fontSize:"14px"}});var q=function(){var t=Object(u.c)(m.getUserName),e=Object(u.c)(m.getUserEmail),c=Object(u.b)(),n=w();return Object(b.jsxs)("div",{className:"userMenu",children:[Object(b.jsx)("img",{src:g,alt:"",width:"32",className:"userAvatar"}),Object(b.jsxs)("span",{className:"userName",children:[Object(b.jsx)("b",{children:t})," "," (".concat(e,")")]}),Object(b.jsx)(k.a,{type:"button",size:"small",variant:"contained",onClick:function(){return c(E.logOut())},className:n.button,children:"Logout"})]})};c(124);var F=function(){var t=Object(u.c)(m.isAuthenticated);return Object(b.jsxs)("div",{className:"AppBar",children:[Object(b.jsx)(p,{}),t?Object(b.jsx)(q,{}):Object(b.jsx)(h,{})]})},T=c(27),U=(c(125),c(179)),z=Object(R.a)({textField:{marginBottom:"15px"},button:{display:"block",letterSpacing:"1px"}});var L=function(){var t=Object(n.useState)(""),e=Object(T.a)(t,2),c=e[0],a=e[1],r=Object(n.useState)(""),s=Object(T.a)(r,2),o=s[0],i=s[1],l=Object(n.useState)(""),j=Object(T.a)(l,2),d=j[0],O=j[1],f=Object(u.b)(),m=function(t){switch(t.currentTarget.name){case"name":a(t.currentTarget.value);break;case"email":i(t.currentTarget.value);break;case"password":O(t.currentTarget.value);break;default:return}},p=z();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{className:"regTitle",children:"Register Page "}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""!==c.trim()&&""!==o.trim()&&""!==d.trim()?(f(E.register({name:c,email:o,password:d})),a(""),i(""),O("")):alert("Fill all fields!")},className:"regForm",autoComplete:"off",children:[Object(b.jsx)(U.a,{type:"text",name:"name",value:c,onChange:m,className:p.textField,size:"small",label:"Name",variant:"outlined"}),Object(b.jsx)(U.a,{type:"email",name:"email",value:o,onChange:m,className:p.textField,size:"small",label:"E-mail",variant:"outlined"}),Object(b.jsx)(U.a,{type:"password",name:"password",value:d,onChange:m,className:p.textField,size:"small",label:"Password",variant:"outlined"}),Object(b.jsx)(k.a,{className:p.button,size:"small",variant:"contained",color:"primary",type:"submit",children:"Register"})]})]})},A=(c(126),Object(R.a)({textField:{marginBottom:"15px"},button:{display:"block",letterSpacing:"1px"}}));var B=function(){var t=Object(n.useState)(""),e=Object(T.a)(t,2),c=e[0],a=e[1],r=Object(n.useState)(""),s=Object(T.a)(r,2),o=s[0],i=s[1],l=Object(u.b)(),j=function(t){switch(t.currentTarget.name){case"email":a(t.currentTarget.value);break;case"password":i(t.currentTarget.value);break;default:return}},d=A();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{className:"logTitle",children:"Login Page"}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""!==c.trim()&&""!==o.trim()?(l(E.logIn({email:c,password:o})),a(""),i("")):alert("Fill all fields!")},className:"logForm",autoComplete:"off",children:[Object(b.jsx)(U.a,{type:"email",name:"email",value:c,onChange:j,className:d.textField,size:"small",label:"E-mail",variant:"outlined"}),Object(b.jsx)(U.a,{type:"password",name:"password",value:o,onChange:j,className:d.textField,size:"small",label:"Password",variant:"outlined"}),Object(b.jsx)(k.a,{className:d.button,size:"small",variant:"contained",color:"primary",type:"submit",children:"Login"})]})]})},I=(c(127),c(178)),P=c(80),D=c.n(P),M=c(173),J=c(177),W=c(176),G=c(172),H=c(174),K=c(175),Q=Object(R.a)({container:{boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12)",borderRadius:"4px",width:500},headRow:{backgroundColor:"#3f51b5"},body:{"& tr:hover":{backgroundColor:"rgba(0,0,0,0.1)"}},bodyRow:{},headCell:{padding:10,color:"white",textTransform:"uppercase",letterSpacing:1},cell:{padding:10}}),V=function(){var t=Object(u.b)(),e=Object(u.c)(m.getContactList);Object(n.useEffect)((function(){e.length||t(E.fetchContacts())}),[]);var c=Q();return Object(b.jsx)(G.a,{className:c.container,children:Object(b.jsxs)(M.a,{className:c.table,"aria-label":"customized table",children:[Object(b.jsx)(H.a,{children:Object(b.jsxs)(K.a,{className:c.headRow,children:[Object(b.jsx)(W.a,{className:c.headCell,children:"Name"}),Object(b.jsx)(W.a,{className:c.headCell,children:"Number"}),Object(b.jsx)(W.a,{className:c.headCell,children:"Delete"})]})}),Object(b.jsx)(J.a,{className:c.body,children:e&&e.map((function(e){var n=e.name,a=e.number,r=e.id;return Object(b.jsxs)(K.a,{className:c.bodyRow,children:[Object(b.jsx)(W.a,{className:c.cell,component:"td",scope:"row",children:n}),Object(b.jsx)(W.a,{className:c.cell,children:a}),Object(b.jsx)(W.a,{className:c.cell,children:Object(b.jsx)(I.a,{onClick:function(){return t(E.deleteContact(r))},"aria-label":"delete",size:"small",children:Object(b.jsx)(D.a,{})})})]},r)}))})]})})},X=(c(129),c(81)),Y=c.n(X),Z=Object(R.a)({textField:{marginBottom:"15px"}});var $=function(){var t=Object(u.b)(),e=Object(n.useState)(""),c=Object(T.a)(e,2),a=c[0],r=c[1],s=Object(n.useState)(""),o=Object(T.a)(s,2),i=o[0],l=o[1],j=function(t){var e=t.currentTarget,c=e.name,n=e.value;switch(c){case"name":r(n);break;case"number":l(n);break;default:return}},d=Object(u.c)((function(t){return m.getContactsItems(t)})),O=Z();return Object(b.jsxs)("form",{className:"Form",onSubmit:function(e){if(e.preventDefault(),""!==a.trim()&&""!==i.trim()){var c=function(){var t=a.toLowerCase();return d.find((function(e){return e.name.toLowerCase()===t}))}();if(c)return alert("".concat(c.name," is already in contacts.")),r(""),void l("");t(E.addContact({name:a,number:i})),r(""),l("")}else alert("Fill all fields!")},children:[Object(b.jsx)(U.a,{type:"text",name:"name",value:a,onChange:j,className:O.textField,size:"small",label:"Name",variant:"outlined"}),Object(b.jsx)(U.a,{type:"text",name:"number",value:i,onChange:j,className:O.textField,size:"small",label:"Number",variant:"outlined"}),Object(b.jsx)(k.a,{type:"submit",variant:"contained",color:"primary",size:"small",startIcon:Object(b.jsx)(Y.a,{}),children:"add contact"})]})},_=Object(R.a)({filter:{marginBottom:15}}),tt=function(){var t=Object(u.b)(),e=_();return Object(b.jsx)(U.a,{className:e.filter,autoComplete:"off",type:"text",name:"filter",onChange:function(e){return t(y.filterContact(e.target.value))},size:"small",label:"Find contact by Name",variant:"outlined"})};var et=function(){var t=Object(u.c)((function(t){return m.getContactsError(t)})),e=Object(u.c)((function(t){return m.getContactsLoading(t)}));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{children:"Phonebook"}),Object(b.jsx)($,{}),Object(b.jsx)("h2",{children:"Contacts"}),Object(b.jsx)(tt,{}),e&&Object(b.jsx)("p",{children:" Loading... "}),t&&Object(b.jsx)("p",{children:" Sorry, something goes wrong: "+t}),Object(b.jsx)(V,{})]})},ct=c(34),nt=c(60),at=["component","redirectTo"],rt=function(t){var e=t.component,c=t.redirectTo,n=Object(nt.a)(t,at),a=Object(u.c)(m.isAuthenticated);return Object(b.jsx)(l.b,Object(ct.a)(Object(ct.a)({},n),{},{render:function(t){return a?Object(b.jsx)(e,Object(ct.a)({},t)):Object(b.jsx)(l.a,{to:c})}}))},st=["component","redirectTo"],ot=function(t){var e=t.component,c=t.redirectTo,n=Object(nt.a)(t,st),a=Object(u.c)(m.isAuthenticated);return Object(b.jsx)(l.b,Object(ct.a)(Object(ct.a)({},n),{},{render:function(t){return a&&n.restricted?Object(b.jsx)(l.a,{to:c}):Object(b.jsx)(e,Object(ct.a)({},t))}}))};var ut,it,lt,bt,jt,dt,Ot,ft=function(){var t=Object(u.b)();return Object(n.useEffect)((function(){t(E.getCurrentUser())}),[]),Object(b.jsxs)(j,{children:[Object(b.jsx)(F,{}),Object(b.jsxs)(l.d,{children:[Object(b.jsx)(ot,{path:"/",exact:!0,component:d}),Object(b.jsx)(ot,{path:"/register",component:L,restricted:!0,redirectTo:"/contacts"}),Object(b.jsx)(ot,{path:"/login",component:B,restricted:!0,redirectTo:"/contacts"}),Object(b.jsx)(rt,{path:"/contacts",component:et,redirectTo:"/login"})]})]})},mt=c(50),pt=c(30),ht=c(82),gt=c.n(ht),Ct=c(7),xt=c(19),vt={name:null,email:null},yt=Object(v.c)(vt,(ut={},Object(Ct.a)(ut,y.registerSuccess.type,(function(t,e){return e.payload.user})),Object(Ct.a)(ut,y.loginSuccess.type,(function(t,e){return e.payload.user})),Object(Ct.a)(ut,y.logoutSuccess.type,(function(){return vt})),Object(Ct.a)(ut,y.getCurrentUserSuccess.type,(function(t,e){return e.payload})),ut)),St=Object(v.c)(null,(it={},Object(Ct.a)(it,y.registerSuccess.type,(function(t,e){return e.payload.token})),Object(Ct.a)(it,y.loginSuccess.type,(function(t,e){return e.payload.token})),Object(Ct.a)(it,y.logoutSuccess.type,(function(){return null})),it)),Nt=Object(v.c)(null,(lt={},Object(Ct.a)(lt,y.registerError.type,(function(t,e){return e.payload})),Object(Ct.a)(lt,y.loginError.type,(function(t,e){return e.payload})),Object(Ct.a)(lt,y.logoutError.type,(function(t,e){return e.payload})),Object(Ct.a)(lt,y.getCurrentUserError.type,(function(t,e){return e.payload})),lt)),Et=Object(v.c)(!1,(bt={},Object(Ct.a)(bt,y.registerSuccess.type,(function(){return!0})),Object(Ct.a)(bt,y.loginSuccess.type,(function(){return!0})),Object(Ct.a)(bt,y.getCurrentUserSuccess.type,(function(){return!0})),Object(Ct.a)(bt,y.logoutSuccess.type,(function(){return!1})),Object(Ct.a)(bt,y.registerError.type,(function(){return!1})),Object(Ct.a)(bt,y.loginError.type,(function(){return!1})),Object(Ct.a)(bt,y.getCurrentUserError.type,(function(){return!1})),bt)),kt=Object(v.c)([],(jt={},Object(Ct.a)(jt,y.fetchContactsSuccess.type,(function(t,e){return e.payload})),Object(Ct.a)(jt,y.addContactsSuccess.type,(function(t,e){return[].concat(Object(mt.a)(t),[e.payload])})),Object(Ct.a)(jt,y.deleteContactSuccess.type,(function(t,e){var c=t.filter((function(t){return t.id!==e.payload}));return Object(mt.a)(c)})),Object(Ct.a)(jt,y.logoutSuccess.type,(function(){return[]})),jt)),Rt=Object(v.c)("",Object(Ct.a)({},y.filterContact.type,(function(t,e){return e.payload}))),wt=Object(v.c)(!1,(dt={},Object(Ct.a)(dt,y.fetchContactsRequest.type,(function(){return!0})),Object(Ct.a)(dt,y.fetchContactsSuccess.type,(function(){return!1})),Object(Ct.a)(dt,y.fetchContactsError.type,(function(){return!1})),Object(Ct.a)(dt,y.addContactsRequest.type,(function(){return!0})),Object(Ct.a)(dt,y.addContactsSuccess.type,(function(){return!1})),Object(Ct.a)(dt,y.addContactsError.type,(function(){return!1})),Object(Ct.a)(dt,y.deleteContactRequest.type,(function(){return!0})),Object(Ct.a)(dt,y.deleteContactSuccess.type,(function(){return!1})),Object(Ct.a)(dt,y.deleteContactError.type,(function(){return!1})),dt)),qt=Object(v.c)("",(Ot={},Object(Ct.a)(Ot,y.fetchContactsError.type,(function(t,e){return e.payload})),Object(Ct.a)(Ot,y.addContactsError.type,(function(t,e){return e.payload})),Object(Ct.a)(Ot,y.deleteContactError.type,(function(t,e){return e.payload})),Object(Ct.a)(Ot,y.fetchContactsRequest.type,(function(){return""})),Object(Ct.a)(Ot,y.addContactsRequest.type,(function(){return""})),Object(Ct.a)(Ot,y.deleteContactRequest.type,(function(){return""})),Ot)),Ft={contacts:Object(xt.b)({items:kt,filter:Rt,loading:wt,error:qt}),auth:Object(xt.b)({user:yt,isAuthenticated:Et,token:St,error:Nt})},Tt=Object(mt.a)(Object(v.d)({serializableCheck:{ignoredActions:[pt.a,pt.f,pt.b,pt.c,pt.d,pt.e]}})),Ut={key:"auth",storage:gt.a,whitelist:["token"]},zt=Object(v.a)({reducer:{contacts:Ft.contacts,auth:Object(pt.g)(Ut,Ft.auth)},middleware:Tt,devTools:!1}),Lt={store:zt,persistor:Object(pt.h)(zt)};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(u.a,{store:Lt.store,children:Object(b.jsx)(i.a,{loading:null,persistor:Lt.persistor,children:Object(b.jsx)(o.a,{children:Object(b.jsx)(ft,{})})})})}),document.getElementById("root"))},97:function(t,e,c){},98:function(t,e,c){},99:function(t,e,c){}},[[132,1,2]]]);
//# sourceMappingURL=main.6d221d3d.chunk.js.map